<?xml version="1.0"?>
<launch>

    <param name="use_sim_time" value="false" />
    
    <!-- Filter the robot structure on the back lslidar points with a "crop box" -->
    <node pkg="nodelet" type="nodelet" name="pcl_manager" args="manager" output="screen" />

    <node pkg="nodelet" type="nodelet" name="crop_box" args="load pcl/CropBox pcl_manager" output="screen">
        <remap from="~input" to="rslidar_points" />
        <remap from="~output" to="rslidar_points_filtered_elev" />
        <rosparam>
                min_x: -0.85
                max_x: 2.0
                min_y: -100.0
                max_y: 100.0
                min_z: -100.0
                max_z: 100.0 <!--30.0-->
                keep_organized: false
                negative: false
        </rosparam>
    </node>

    <node pkg="elevation_mapping" type="elevation_mapping" name="elevation_mapping" output="screen">
        <rosparam command="load" file="$(find elevation_mapping_demos)/config/robots/go1.yaml"/>
        <rosparam command="load" file="$(find elevation_mapping_demos)/config/postprocessing/postprocessor_pipeline.yaml"/>
    </node>

    <node pkg="grid_map_visualization" type="grid_map_visualization" name="elevation_map_fused_visualization" output="screen">
        <param name="grid_map_topic" value="/elevation_mapping/elevation_map" />
        <rosparam command="load" file="$(find elevation_mapping_demos)/config/visualization/occupancy.yaml" />
    </node>

</launch>
